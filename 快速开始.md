# LocationMobile - 快速开始指南

## 🎯 第一步：导入项目

### 1. 解压项目
- Windows: 右键 → 解压到 LocationMobile\
- macOS/Linux: `unzip LocationMobile.zip`

### 2. 用IntelliJ IDEA打开
```
File → Open → 选择 LocationMobile 文件夹 → OK
```

### 3. 等待Gradle同步
- 右下角会显示"Gradle build running..."
- 需要3-10分钟(取决于网络速度)
- 耐心等待完成

---

## 🔧 第二步：配置Android SDK

### 创建 local.properties
在项目根目录创建文件 `local.properties`:

**Windows:**
```properties
sdk.dir=C\:\\Users\\你的用户名\\AppData\\Local\\Android\\Sdk
```

**macOS:**
```properties
sdk.dir=/Users/你的用户名/Library/Android/sdk
```

**Linux:**
```properties
sdk.dir=/home/你的用户名/Android/Sdk
```

如果没有Android SDK,先下载Android Studio,它会自动安装SDK。

---

## 🌍 第三步：配置Cesium Token (必须!)

### 1. 获取Token
1. 访问: https://cesium.com/ion/signup
2. 注册免费账户(可用GitHub登录)
3. 登录后访问: https://cesium.com/ion/tokens
4. 点击"Create token"
5. 输入名称(如"LocationMobile")
6. 复制生成的token

### 2. 替换到项目
1. 打开文件:
   ```
   app → src → main → assets → cesium → index.html
   ```
2. 搜索: `YOUR_CESIUM_ION_ACCESS_TOKEN`
3. 替换为你的token
4. 保存文件 (Ctrl+S)

---

## 📱 第四步：准备设备

### 选项A: 真实Android手机(推荐)

**启用开发者选项:**
1. 设置 → 关于手机
2. 连续点击"版本号"7次
3. 返回设置,进入"开发者选项"
4. 打开"USB调试"

**连接手机:**
1. USB线连接电脑
2. 手机上点击"允许USB调试"
3. 勾选"始终允许这台计算机"

**验证:**
- 打开Terminal
- 输入: `adb devices`
- 应该能看到你的设备

### 选项B: 使用模拟器

**创建模拟器:**
1. `Tools → Device Manager`
2. 点击"Create Device"
3. 选择: Pixel 5
4. 选择系统镜像: API 30+
5. 点击Finish
6. 启动模拟器

---

## ▶️ 第五步：运行应用

### 1. 创建运行配置

**自动方式:**
- 右键 `MainActivity.kt`
- 选择"Run 'MainActivity'"

**手动方式:**
- 点击顶部运行配置下拉框
- 选择"Edit Configurations..."
- 点击"+" → "Android App"
- Name: app
- Module: LocationMobile.app
- 点击OK

### 2. 运行
1. 点击绿色运行按钮 ▶
2. 或按 `Shift + F10`
3. 选择设备
4. 等待编译和安装

### 3. 首次运行
- 会请求定位权限
- 点击"授予权限" → "允许"
- 等待地图加载(3-5秒)

---

## 🎉 第六步：测试功能

### 单次定位
1. 点击"📍 获取位置"
2. 等待GPS定位
3. 地图会飞到你的位置
4. 显示红色标记

### 持续跟踪
1. 点击"🎯 开始跟踪"
2. 移动你的设备(如果是真机)
3. 观察轨迹线绘制
4. 点击"⏸️ 停止跟踪"停止

### 清除标记
- 点击"🗑️ 清除标记"
- 清除所有标记和轨迹

---

## 🐛 常见问题

### Run按钮是灰色?
**解决:**
1. 等待Gradle同步完成
2. 右键MainActivity.kt → Run
3. 或手动创建运行配置

### 地图显示空白?
**检查:**
- Cesium Token是否配置
- 网络连接是否正常
- 查看Logcat是否有错误

### 无法获取定位?
**真机:**
- 确保GPS已开启
- 到户外测试

**模拟器:**
- 点击"..."按钮
- Location → 输入坐标
- 经度: 116.404, 纬度: 39.915
- 点击Send

### Gradle同步失败?
**解决:**
1. `File → Invalidate Caches → Invalidate and Restart`
2. 检查网络
3. 查看Build窗口错误信息

---

## 📊 查看日志

打开Logcat:
1. 底部点击"Logcat"标签
2. 过滤器输入: `LocationMobile`
3. 观察运行日志

---

## ✅ 成功标志

运行成功后,你应该看到:
- ✅ 三维地球显示
- ✅ 三个功能按钮
- ✅ 可以获取定位
- ✅ 可以看到位置标记

---

## 🎓 下一步

成功运行后:
1. 熟悉代码结构
2. 尝试修改界面
3. 学习定位API
4. 添加新功能

---

**准备就绪,开始开发吧!** 🚀

遇到问题?查看 README.md 获取更多帮助!
